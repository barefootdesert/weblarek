# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Vite

Структура проекта:

-   **src/** — исходные файлы проекта
    
-   **src/components/** — папка с JS компонентами
    
-   **src/components/base/** — папка с базовым кодом
    
-   **src/components/models/** — папка с моделями данных
    

Важные файлы:

-   `index.html` — HTML-файл главной страницы
    
-   `src/types/index.ts` — файл с типами
    
-   `src/main.ts` — точка входа приложения
    
-   `src/scss/styles.scss` — корневой файл стилей
    
-   `src/utils/constants.ts` — файл с константами
    
-   `src/utils/utils.ts` — файл с утилитами
    

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды:

Bash

```
npm install
npm run dev

```

----------

# Интернет-магазин «Web-Larёk»

«Web-Larёk» — это интернет-магазин с товарами для веб-разработчиков. Архитектура приложения реализована по парадигме **MVP (Model-View-Presenter)**. Взаимодействие между слоями строится на событийно-ориентированном подходе через брокер событий.

----------

## Архитектура приложения

### 1. Базовый код (Base)

#### Класс Component

Базовый класс для всех компонентов интерфейса, предоставляющий общий инструментарий для работы с DOM-элементами.

-   `constructor(container: HTMLElement)` — Сохраняет корневой элемент, в котором будет отрисован компонент.
    
-   `render(data?: Partial<T>)` — Отвечает за заполнение свойств компонента данными и возврат готового DOM-элемента для отображения на странице.
    
-   `setText(element: HTMLElement, value: unknown)` — Управляет текстовым содержимым переданного элемента.
    
-   `setImage(element: HTMLImageElement, src: string, alt?: string)` — Отвечает за установку источника изображения и альтернативного текста для элементов `<img>`.
    
-   `setVisible / setHidden(element: HTMLElement)` — Переключают видимость элемента (показ или скрытие).
    

#### Класс Api

Обеспечивает базовое взаимодействие с сервером по протоколу HTTP.

-   `get(uri: string)` — Выполняет запрос на получение ресурсов с сервера по указанному адресу.
    
-   `post(uri: string, data: object, method?)` — Отправляет данные на сервер в формате JSON, позволяя создавать или изменять ресурсы.
    
-   `handleResponse(response: Response)` — Централизованно проверяет успешность ответа от сервера, преобразует его в JSON или формирует текст ошибки при неудаче.
    

#### Класс EventEmitter

Брокер событий, реализующий паттерн «Наблюдатель». Позволяет компонентам общаться друг с другом без прямой зависимости.

-   `on(event: EventName, callback: Function)` — Регистрирует обработчик (подписчика) на определенное событие.
    
-   `emit(event: string, data?: T)` — Инициирует событие и уведомляет всех подписанных на него слушателей, передавая им данные.
    
-   `trigger(event: string, context?: Partial<T>)` — Создает функцию-замыкание, которая при вызове автоматически генерирует нужное событие.
    

----------

## 2. Модели данных (Model)

### ProductsModel

Хранит состояние каталога товаров и управляет выбранным товаром.

-   `setItems(items: IProduct[])` — Обновляет список всех доступных товаров в системе.
    
-   `getItems()` — Предоставляет текущий массив всех товаров каталога.
    
-   `getProduct(id: string)` — Выполняет поиск конкретного товара по его уникальному идентификатору.
    
-   `setSelected(item: IProduct | null)` — Устанавливает или сбрасывает товар, который пользователь выбрал для детального просмотра (превью).
    
-   `getSelected()` — Возвращает текущий выбранный товар для отображения в превью.
    

### BasketModel

Отвечает за логику корзины покупок.

-   `addItem(item: IProduct)` — Добавляет товар в корзину (проверяя наличие цены, так как бесценные товары нельзя купить).
    
-   `removeItem(id: string)` — Исключает товар из корзины по его идентификатору.
    
-   `getTotal()` — Вычисляет суммарную стоимость всех товаров, находящихся в корзине.
    
-   `getCount()` — Возвращает текущее количество уникальных позиций в корзине.
    
-   `clear()` — Полностью очищает список покупок.
    

### BuyerModel

Обрабатывает контактную информацию и способ оплаты покупателя.

-   `setData(data: Partial<IBuyer>)` — Обновляет конкретные поля данных покупателя (адрес, почту, телефон или способ оплаты).
    
-   `getData()` — Возвращает текущий объект с данными покупателя.
    
-   `validate()` — Проверяет корректность заполнения обязательных полей и возвращает список найденных ошибок или подтверждение валидности.
    

----------

## 3. Слой коммуникации (API)

### Класс LarekApi

Специализированный класс для работы с API магазина «Web-Larёk».

-   `getProducts()` — Получает список товаров с сервера и дополняет пути к изображениям префиксом CDN для корректного отображения.
    
-   `postOrder(order: IOrder)` — Отправляет сформированный заказ со списком товаров и данными покупателя на сервер для оформления покупки.