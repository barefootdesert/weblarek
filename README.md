Проектная работа «Web-Larёk»
=========================================

Проект реализован с использованием современного стека технологий и четким разделением ответственности между модулями.

Стек технологий
---------------

*   **Язык:** HTML, SCSS, TypeScript
    
*   **Архитектурный паттерн:** MVP (Model-View-Presenter)
    

Архитектура приложения
----------------------

Код разделен на три основных слоя:

1.  **Слой данных (Model):** Классы, отвечающие за хранение, бизнес-логику и валидацию данных.
    
2.  **Слой отображения (View):** Компоненты, отвечающие за отрисовку интерфейса и регистрацию действий пользователя.
    
3.  **Презентер:** Роль связующего звена выполняет файл main.ts, который управляет взаимодействием модели и отображения через события.
    

Базовый код (Infrastructure)
----------------------------

### Events.ts

Реализация брокера событий (классический **EventEmitter**). Позволяет компонентам взаимодействовать друг с другом без прямой зависимости.

*   **Методы:** on, emit, trigger.
    

### Api.ts

Базовый класс для работы с сетью. Содержит методы get и post для выполнения JSON-запросов к серверу.

### Component.ts

Абстрактный класс для всех компонентов отображения. Предоставляет инструментарий для работы с DOM:

*   Методы: setText, setImage, setDisabled, toggleClass.
    
*   Метод render: заполнение компонента данными и возврат корневого элемента.
    

Слой данных (Models)
--------------------

Модели уведомляют систему об изменениях через события и не работают с интерфейсом напрямую.

*   **ProductModel.ts**: Хранит список товаров и товар, выбранный для предпросмотра. Генерирует событие products:changed.
    
*   **BasketModel.ts**: Содержит массив выбранных товаров. Считает общую сумму (getTotalPrice) и количество товаров. События: basket:product:added, basket:product:removed.
    
*   **BuyerModel.ts**: Состояние данных покупателя (адрес, телефон, email, способ оплаты) и их валидация (validateOrder, validateContacts).
    

Слой отображения (Views)
------------------------

### Глобальные компоненты

*   **Modal.ts**: Универсальное модальное окно. Методы open, close и сеттер content.
    
*   **Header.ts**: Управляет счетчиком корзины и кнопкой открытия.
    
*   **Gallery.ts**: Контейнер для размещения сетки карточек товаров на главной странице.
    

### Система карточек (Наследование от Card.ts)

*   **Card.ts**: Базовый класс (заголовок, цена).
    
*   **CardCatalog.ts**: Карточка для главной страницы (категория, изображение).
    
*   **CardPreview.ts**: Окно детального просмотра (описание, управление кнопкой покупки).
    
*   **CardBasket.ts**: Элемент списка в корзине (индекс, кнопка удаления).
    

### Система форм (Наследование от Form.ts)

*   **Form.ts**: Базовый класс формы (кнопка сабмита, вывод ошибок).
    
*   **FormOrder.ts**: Первый этап оформления (способ оплаты и адрес).
    
*   **FormContacts.ts**: Второй этап (email и телефон).



Основной процесс (Flow)
-----------------------

1.  **Запуск:** main.ts через LarekApi.ts загружает товары и передает их в ProductModel.ts.
    
2.  **Просмотр:** При выборе карточки создается экземпляр CardPreview.ts, который вставляется в Modal.ts.
    
3.  **Корзина:** При нажатии «Купить» обновляется Basket.ts, что вызывает обновление Header.ts.
    
4.  **Оформление:**
    
    *   Данные из FormOrder.ts валидируются в Buyer.ts, затем открывается FormContacts.ts.
        
    *   После успешного POST-запроса вызывается Success.ts.
        
5.  **Финал:** Корзина и данные покупателя очищаются.